- name: Dosyayı Kaydet ve Depoya Gönder
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"

        # Dosya sadece başlıksa boş say
        if [ "$(wc -l < film-panel-3.m3u)" -le 1 ]; then
          echo "❌ Dosya boş, commit atılmadı."
          exit 0
        fi

        git add film-panel-3.m3u

        if ! git diff --cached --quiet; then
          git commit -m "Güncel M3U Listesi: $(date -u)"
          git pull origin main --rebase
          git push origin main
        else
          echo "Değişiklik yok."
        fi
